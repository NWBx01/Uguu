server {
    listen            443 ssl http2;
    server_name       XMAINDOMAINX;

    ssl on;
    ssl_certificate   /root/.acme.sh/XMAINDOMAINX_ecc/fullchain.cer;
    ssl_certificate_key /root/.acme.sh/XMAINDOMAINX_ecc/XMAINDOMAINX.key;
	
    ssl_protocols     TLSv1.2 TLSv1.3;
    ssl_ciphers       'ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-CCM:DHE-RSA-AES256-CCM8:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-CCM:DHE-RSA-AES128-CCM8:DHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256';
    ssl_ecdh_curve    secp384r1;
	ssl_prefer_server_ciphers on;
    ssl_session_tickets off;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:10m;
    ssl_buffer_size 4k;
	
	ssl_stapling on;
    ssl_stapling_verify on;
	resolver 1.1.1.1 8.8.8.8 valid=300s;
    resolver_timeout 5s;
	
	add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    root              /var/www/uguu/dist/public/;
    autoindex         off;
    access_log        off;
    index             index.html index.php;

    location ~* \.(css|js|jpg|jpeg|gif|png|ico|xml|eot|woff|woff2|ttf|svg|otf|x-icon|avif|webp|apng)$ {
      expires         30d;
    }

    gzip              on;
    gzip_min_length   1000;
    gzip_comp_level   6;
    gzip_proxied      any;
    gzip_types        text/css text/js text/javascript application/javascript application/x-javascript;

    location ~* \.php$ {
    fastcgi_pass     unix:/var/run/php/php8.3-fpm.sock;
    fastcgi_intercept_errors on;
    fastcgi_index    index.php;
    fastcgi_split_path_info ^(.+\.php)(.*)$;
    include          fastcgi_params;
    fastcgi_param    SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
}

server {
    listen           443 ssl;
    server_name      XFILESDOMAINX;

    ssl on;
    ssl_certificate   /root/.acme.sh/XMAINDOMAINX_ecc/fullchain.cer;
    ssl_certificate_key /root/.acme.sh/XMAINDOMAINX_ecc/XMAINDOMAINX.key;
	
    ssl_protocols    TLSv1.2 TLSv1.3;
    ssl_ciphers 'ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-CCM:DHE-RSA-AES256-CCM8:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-CCM:DHE-RSA-AES128-CCM8:DHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256';
    ssl_ecdh_curve    secp384r1;
    ssl_prefer_server_ciphers on;
    ssl_session_tickets off;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:10m;
    ssl_buffer_size 16k;

    ssl_stapling on;
    ssl_stapling_verify on;
    resolver 1.1.1.1 8.8.8.8 valid=300s;
    resolver_timeout 5s;

    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    root             /var/www/files/;
    autoindex        off;
    access_log       off;
    index            index.html;
  }
  
#Moe server {
#Moe    listen           443 ssl http2;
#Moe    server_name      XMOEPANELDOMAINX;
#Moe
#Moe    ssl on;
#Moe    ssl_certificate   /root/.acme.sh/XMAINDOMAINX_ecc/fullchain.cer;
#Moe    ssl_certificate_key /root/.acme.sh/XMAINDOMAINX_ecc/XMAINDOMAINX.key;
#Moe	
#Moe    ssl_protocols    TLSv1.2 TLSv1.3;
#Moe    ssl_ciphers 'ECDHE-RSA-CHACHA20-POLY1305:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-CCM:DHE-RSA-AES256-CCM8:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-CCM:DHE-RSA-AES128-CCM8:DHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256';
#Moe    ssl_ecdh_curve    secp384r1;
#Moe    ssl_prefer_server_ciphers on;
#Moe    ssl_session_tickets off;
#Moe    ssl_session_timeout 1d;
#Moe    ssl_session_cache shared:SSL:10m;
#Moe    ssl_buffer_size 16k;
#Moe
#Moe    ssl_stapling on;
#Moe    ssl_stapling_verify on;
#Moe    resolver 1.1.1.1 8.8.8.8 valid=300s;
#Moe    resolver_timeout 5s;
#Moe
#Moe    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
#Moe
#Moe    root              /var/www/moepanel/dist/;
#Moe    autoindex         off;
#Moe    access_log        off;
#Moe    index             index.php;
#Moe
#Moe    location ~* \.php$ {
#Moe    fastcgi_pass     unix:/var/run/php/php8.3-fpm.sock;
#Moe    fastcgi_intercept_errors on;
#Moe    fastcgi_index    index.php;
#Moe    fastcgi_split_path_info ^(.+\.php)(.*)$;
#Moe    include          fastcgi_params;
#Moe    fastcgi_param    SCRIPT_FILENAME $document_root$fastcgi_script_name;
#Moe    }
#Moe  }

   server {
      listen           80;
      server_name      XMAINDOMAINX;
      return 301       https://XMAINDOMAINX$request_uri;
    }

  server {
      listen           80;
      server_name      XFILESDOMAINX;
      return 301       https://XFILESDOMAINX$request_uri;
    }
	
  server {
      listen           80;
      server_name      XMOEPANELDOMAINX;
      return 301       https://XMOEPANELDOMAINX$request_uri;
    }
